parameters:
  
  currency_subscriber.class: Heystack\Subsystem\Ecommerce\Currency\Subscriber
  currency_input_processor.class: Heystack\Subsystem\Ecommerce\Currency\Input\Processor
  currency_output_processor.class: Heystack\Subsystem\Ecommerce\Currency\Output\Processor
  currency.class: $$$
  
  currency_service.class: Heystack\Subsystem\Ecommerce\Currency\CurrencyService
  
  transaction.class: Heystack\Subsystem\Ecommerce\Transaction\Transaction
  
  transaction_subscriber.class: Heystack\Subsystem\Ecommerce\Transaction\Subscriber
  
  collator.class: Heystack\Subsystem\Ecommerce\Transaction\Collator
  
services:
  
  transaction:
    class: %transaction.class%
    arguments: [ @state, %collator.class% ]
    calls:
      - [ restoreState ]
      
  transaction_subscriber:
    class: %transaction_subscriber.class%
    arguments: [ @transaction, @event_dispatcher, @storage ]
    
  currency_service:
    class: %currency_service.class%
    arguments: [ %currency.class%, @state, @event_dispatcher ]
    calls:
      - [ restoreState ]
  
  currency_subscriber:
    class: %currency_subscriber.class%
      
  currency_input_processor:
    class: %currency_input_processor.class%
    arguments: [ %currency.class%, @currency_service ]
    
  currency_output_processor:
    class: %currency_output_processor.class%
    arguments: [%currency.class%]    
      
  input_processor_handler:
    class: %input_processor_handler.class%
    calls:
      - [ addProcessor, [ @currency_input_processor ] ]
      
  output_processor_handler:
    class: %output_processor_handler.class%
    calls:
      - [ addProcessor, [ @currency_output_processor ] ]
      
  event_dispatcher:
    class: %event_dispatcher.class%
    calls: 
      - [ addSubscriber, [ @transaction_subscriber ] ]
  
  dataobject_generator:
    class: %dataobject_generator.class%
    calls:
      - [ addYamlSchema, [ ecommerce-core/config/storage/transaction.yml ] ]
      
  ss_orm_backend:
    class: %ss_orm_backend.class%
    calls:
      - [ addDataProvider, [ @transaction ] ]
      
      